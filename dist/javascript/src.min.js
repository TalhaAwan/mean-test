!function(){angular.module("boilerplate",["ngRoute","appRoutes","mainCtrl","smart-table"])}(),function(){angular.module("appRoutes",[]).config(["$routeProvider","$locationProvider","$httpProvider",function(n,e,o){n.when("/",{templateUrl:"app/main/main.html",controller:"mainController"}).when("/sign-in",{templateUrl:"app/auth/signin.html",controller:"signInController"}).when("/sign-up",{templateUrl:"app/auth/signup.html",controller:"signUpController"}).otherwise({redirectTo:"/"}),e.html5Mode(!0),o.interceptors.push("authHttpResponseInterceptor")}]).factory("authHttpResponseInterceptor",["$q","$location",function(n,e){return{request:function(n){var e=localStorage.userToken;return n.headers.token=e,n},response:function(e){return e.status,e||n.when(e)},responseError:function(o){return 401===o.status&&(localStorage.removeItem("userToken"),e.path("/")),n.reject(o)}}}])}(),function(){angular.module("boilerplate").factory("authService",["$http",function(n){return{create:function(e,o,t){n.post("/api/users/",e).success(function(n){o(n)}).error(function(n){t(n)})},localAuth:function(e,o,t){n.post("/api/auth/local",e).success(function(n){o(n)}).error(function(n){t(n)})}}}])}(),function(){angular.module("boilerplate").controller("signInController",["$scope","authService",function(n,e){}])}(),function(){angular.module("boilerplate").controller("signUpController",["$scope","authService",function(n,e){}])}(),function(){angular.module("mainCtrl",[]).controller("mainController",["$scope","userService","$timeout",function(n,e,o){n.user={},e.getAll(function(e){console.log(e),n.users=e},function(n){console.log(n)}),n.ping=function(){console.log(n.user),e.create(n.user,function(e){console.log(e),n.users.push(e),n.user={}},function(e){console.log(e),n.pingErrorMsg=e.message||"something went wrong",o(function(){n.pingErrorMsg=""},3e3)})},n.update=function(t,r){console.log(t),e.update(t,function(e){console.log(e),n.users[r]=e},function(e){console.log(e),n.pingErrorMsg=e.message||"something went wrong",o(function(){n.pingErrorMsg=""},3e3)})},n.delete=function(t,r){e.delete({id:t},function(){n.users.splice(r,1)},function(e){console.log(e),n.pingErrorMsg=e.message||"something went wrong",o(function(){n.pingErrorMsg=""},3e3)})}}])}(),function(){angular.module("boilerplate").factory("userService",["$http",function(n){return{create:function(e,o,t){n.post("/api/ping/",e,{}).success(function(n){o(n)}).error(function(n){t(n)})},update:function(e,o,t){n.put("/api/update/",e,{}).success(function(n){o(n)}).error(function(n){t(n)})},get:function(e,o,t){n.get("/api/user/"+e).success(function(n){o(n)}).error(function(n){t(n)})},getAll:function(e,o){n.get("/api/users").success(function(n){e(n)}).error(function(n){o(n)})},delete:function(e,o,t){console.log(e),n({url:"/api/delete",method:"DELETE",data:e,headers:{"Content-Type":"application/json;charset=utf-8"}}).then(function(n){o(n)},function(n){t(n)})}}}])}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFwcC5yb3V0ZXMuanMiLCJhdXRoL2F1dGguc2VydmljZS5qcyIsImF1dGgvc2lnbmluLmN0cmwuanMiLCJhdXRoL3NpZ251cC5jdHJsLmpzIiwibWFpbi9tYWluLmN0cmwuanMiLCJtYWluL3VzZXIuc2VydmljZS5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCIkbG9jYXRpb25Qcm92aWRlciIsIiRodHRwUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImh0bWw1TW9kZSIsImludGVyY2VwdG9ycyIsInB1c2giLCJmYWN0b3J5IiwiJHEiLCIkbG9jYXRpb24iLCJyZXF1ZXN0IiwidG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJ1c2VyVG9rZW4iLCJoZWFkZXJzIiwicmVzcG9uc2UiLCJzdGF0dXMiLCJyZXNwb25zZUVycm9yIiwicmVqZWN0aW9uIiwicmVtb3ZlSXRlbSIsInBhdGgiLCJyZWplY3QiLCIkaHR0cCIsImNyZWF0ZSIsIm9iaiIsInN1Y2Nlc3MiLCJlcnJvciIsInBvc3QiLCJkYXRhIiwibG9jYWxBdXRoIiwiJHNjb3BlIiwiYXV0aFNlcnZpY2UiLCJ1c2VyU2VydmljZSIsIiR0aW1lb3V0IiwidXNlciIsImdldEFsbCIsImNvbnNvbGUiLCJsb2ciLCJ1c2VycyIsImVyciIsInBpbmciLCJwaW5nRXJyb3JNc2ciLCJtZXNzYWdlIiwidXBkYXRlIiwiaW5kZXgiLCJkZWxldGUiLCJpZCIsInNwbGljZSIsInB1dCIsImdldCIsInVybCIsIm1ldGhvZCIsIkNvbnRlbnQtVHlwZSIsInRoZW4iXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0FBLFFBQUFDLE9BQUEsZUFBQSxVQUFBLFlBQUEsV0FBQSxtQkNEQSxXQUNBRCxRQUFBQyxPQUFBLGdCQUFBQyxRQUFBLGlCQUFBLG9CQUFBLGdCQUFBLFNBQUFDLEVB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LEVBQUFhLE1BR0FJLE9BQUEsU0FBQW5CLEVBQUFDLEVBQUFDLEdBQ0FKLEVBQUEwQixJQUFBLGVBQUF4QixNQUNBQyxRQUFBLFNBQUFHLEdBQ0FILEVBQUFHLEtBRUFGLE1BQUEsU0FBQWEsR0FDQWIsRUFBQWEsTUFHQVUsSUFBQSxTQUFBSCxFQUFBckIsRUFBQUMsR0FDQUosRUFBQTJCLElBQUEsYUFBQUgsR0FDQXJCLFFBQUEsU0FBQUcsR0FDQUgsRUFBQUcsS0FFQUYsTUFBQSxTQUFBYSxHQUNBYixFQUFBYSxNQUdBSixPQUFBLFNBQUFWLEVBQUFDLEdBQ0FKLEVBQUEyQixJQUFBLGNBQ0F4QixRQUFBLFNBQUFHLEdBQ0FILEVBQUFHLEtBRUFGLE1BQUEsU0FBQWEsR0FDQWIsRUFBQWEsTUFHQU0sT0FBQSxTQUFBWCxFQUFBVCxFQUFBQyxHQUNBVSxRQUFBQyxJQUFBSCxHQUNBWixHQUNBNEIsSUFBQSxjQUNBQyxPQUFBLFNBQ0F2QixLQUFBTSxFQUNBcEIsU0FDQXNDLGVBQUEsb0NBR0FDLEtBQUEsU0FBQXpCLEdBQ0FILEVBQUFHLElBQ0EsU0FBQVcsR0FDQWIsRUFBQWEiLCJmaWxlIjoic3JjLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpIHtcbiAgICBhbmd1bGFyLm1vZHVsZSgnYm9pbGVycGxhdGUnLCBbJ25nUm91dGUnLCAnYXBwUm91dGVzJywgJ21haW5DdHJsJywgJ3NtYXJ0LXRhYmxlJ10pO1xufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcFJvdXRlcycsIFtdKS5jb25maWcoWyckcm91dGVQcm92aWRlcicsICckbG9jYXRpb25Qcm92aWRlcicsICckaHR0cFByb3ZpZGVyJywgZnVuY3Rpb24gKCRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlciwgJGh0dHBQcm92aWRlcikge1xuXG4gICAgICAgICRyb3V0ZVByb3ZpZGVyXG5cbiAgICAgICAgLy8gaG9tZSBwYWdlXG4gICAgICAgICAgICAud2hlbignLycsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9tYWluL21haW4uaHRtbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ21haW5Db250cm9sbGVyJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC53aGVuKCcvc2lnbi1pbicsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9hdXRoL3NpZ25pbi5odG1sJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnc2lnbkluQ29udHJvbGxlcidcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbignL3NpZ24tdXAnLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvYXV0aC9zaWdudXAuaHRtbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3NpZ25VcENvbnRyb2xsZXInXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLm90aGVyd2lzZSh7XG4gICAgICAgICAgICAgICAgcmVkaXJlY3RUbzogJy8nXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG4gICAgICAgICRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ2F1dGhIdHRwUmVzcG9uc2VJbnRlcmNlcHRvcicpO1xuXG4gICAgfV0pXG5cbiAgICAgICAgLmZhY3RvcnkoJ2F1dGhIdHRwUmVzcG9uc2VJbnRlcmNlcHRvcicsIFsnJHEnLCAnJGxvY2F0aW9uJywgZnVuY3Rpb24gKCRxLCAkbG9jYXRpb24pIHtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0OiBmdW5jdGlvbiAocmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG9rZW4gPSBsb2NhbFN0b3JhZ2UudXNlclRva2VuO1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LmhlYWRlcnMudG9rZW4gPSB0b2tlbjtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3Q7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXNwb25zZTogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZSB8fCAkcS53aGVuKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlRXJyb3I6IGZ1bmN0aW9uIChyZWplY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlamVjdGlvbi5zdGF0dXMgPT09IDQwMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oXCJ1c2VyVG9rZW5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QocmVqZWN0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XSk7XG59KSgpOyIsIihmdW5jdGlvbigpe1xuICAgIGFuZ3VsYXIubW9kdWxlKCdib2lsZXJwbGF0ZScpLmZhY3RvcnkoJ2F1dGhTZXJ2aWNlJywgWyckaHR0cCcsIGZ1bmN0aW9uKCRodHRwKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjcmVhdGU6IGZ1bmN0aW9uIChvYmosIHN1Y2Nlc3MsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS91c2Vycy8nLCBvYmopLlxuICAgICAgICAgICAgICAgIHN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzcyhkYXRhKTtcbiAgICAgICAgICAgICAgICB9KS5cbiAgICAgICAgICAgICAgICBlcnJvcihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBlcnJvcihkYXRhKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsb2NhbEF1dGggOiBmdW5jdGlvbiAob2JqLCBzdWNjZXNzLCBlcnJvcikge1xuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvYXV0aC9sb2NhbCcsIG9iaikuXG4gICAgICAgICAgICAgICAgc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzKGRhdGEpO1xuICAgICAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgICAgIGVycm9yKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yKGRhdGEpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgfV0pO1xufVxuKSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuZ3VsYXIubW9kdWxlKCdib2lsZXJwbGF0ZScpLmNvbnRyb2xsZXIoJ3NpZ25JbkNvbnRyb2xsZXInLCAgWyckc2NvcGUnLCAnYXV0aFNlcnZpY2UnLCBmdW5jdGlvbigkc2NvcGUsIGF1dGhTZXJ2aWNlKSB7XG5cblxuICAgICAgICB9XSk7XG4gICAgfVxuKSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICBhbmd1bGFyLm1vZHVsZSgnYm9pbGVycGxhdGUnKS5jb250cm9sbGVyKCdzaWduVXBDb250cm9sbGVyJywgWyckc2NvcGUnLCAnYXV0aFNlcnZpY2UnLCBmdW5jdGlvbiAoJHNjb3BlLCBhdXRoU2VydmljZSkge1xuXG5cbiAgICB9XSk7XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICAgYW5ndWxhci5tb2R1bGUoJ21haW5DdHJsJywgW10pLmNvbnRyb2xsZXIoJ21haW5Db250cm9sbGVyJywgWyckc2NvcGUnLCAndXNlclNlcnZpY2UnLCAnJHRpbWVvdXQnLCBmdW5jdGlvbiAoJHNjb3BlLCB1c2VyU2VydmljZSwgJHRpbWVvdXQpIHtcbiAgICAgICAgJHNjb3BlLnVzZXIgPSB7fTtcbiAgICAgICAgdXNlclNlcnZpY2UuZ2V0QWxsKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgICRzY29wZS51c2VycyA9IGRhdGE7XG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgICAgfSlcbiAgICAgICAgJHNjb3BlLnBpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUudXNlcik7ICAgICAgICAgICBcbiAgICAgICAgICAgIHVzZXJTZXJ2aWNlLmNyZWF0ZSgkc2NvcGUudXNlciwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxuICAgICAgICAgICAgICAgICRzY29wZS51c2Vycy5wdXNoKGRhdGEpO1xuICAgICAgICAgICAgICAgICRzY29wZS51c2VyID0ge31cbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICAgICAgICAgICAgJHNjb3BlLnBpbmdFcnJvck1zZyA9IGVyci5tZXNzYWdlIHx8IFwic29tZXRoaW5nIHdlbnQgd3JvbmdcIjtcbiAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5waW5nRXJyb3JNc2cgPSBcIlwiXG4gICAgICAgICAgICAgICAgfSwgMzAwMClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUudXBkYXRlID0gZnVuY3Rpb24gKHVzZXIsIGluZGV4KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh1c2VyKTsgICAgICAgICAgIFxuICAgICAgICAgICAgdXNlclNlcnZpY2UudXBkYXRlKHVzZXIsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSlcbiAgICAgICAgICAgICAgICAkc2NvcGUudXNlcnNbaW5kZXhdID0gZGF0YVxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgICAgICAgICAgICAkc2NvcGUucGluZ0Vycm9yTXNnID0gZXJyLm1lc3NhZ2UgfHwgXCJzb21ldGhpbmcgd2VudCB3cm9uZ1wiO1xuICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBpbmdFcnJvck1zZyA9IFwiXCJcbiAgICAgICAgICAgICAgICB9LCAzMDAwKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5kZWxldGUgPSBmdW5jdGlvbiAoaWQsIGluZGV4KSB7ICAgICAgICBcbiAgICAgICAgICAgIHVzZXJTZXJ2aWNlLmRlbGV0ZSh7aWQ6IGlkfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICRzY29wZS51c2Vycy5zcGxpY2UoaW5kZXgsMSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgICAgICAgICAgICRzY29wZS5waW5nRXJyb3JNc2cgPSBlcnIubWVzc2FnZSB8fCBcInNvbWV0aGluZyB3ZW50IHdyb25nXCI7XG4gICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGluZ0Vycm9yTXNnID0gXCJcIlxuICAgICAgICAgICAgICAgIH0sIDMwMDApXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfV0pO1xufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAgIGFuZ3VsYXIubW9kdWxlKCdib2lsZXJwbGF0ZScpLmZhY3RvcnkoJ3VzZXJTZXJ2aWNlJywgWyckaHR0cCcsIGZ1bmN0aW9uICgkaHR0cCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY3JlYXRlOiBmdW5jdGlvbiAob2JqLCBzdWNjZXNzLCBlcnJvcikge1xuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvcGluZy8nLCBvYmosIHt9KS5cbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzcyhkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICAgICAgICAgIGVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHVwZGF0ZTogZnVuY3Rpb24gKG9iaiwgc3VjY2VzcywgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAkaHR0cC5wdXQoJy9hcGkvdXBkYXRlLycsIG9iaiwge30pLlxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9KS5cbiAgICAgICAgICAgICAgICAgICAgZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoaWQsIHN1Y2Nlc3MsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3VzZXIvJyArIGlkKS5cbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzcyhkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICAgICAgICAgIGVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldEFsbDogZnVuY3Rpb24gKHN1Y2Nlc3MsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3VzZXJzJykuXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3MoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgICAgICAgICBlcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZWxldGU6IGZ1bmN0aW9uICh1c2VyLCBzdWNjZXNzLCBlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHVzZXIpXG4gICAgICAgICAgICAgICAgJGh0dHAoe1xuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvYXBpL2RlbGV0ZScsXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHVzZXIsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04XCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzcyhkYXRhKTtcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgfV0pO1xufVxuKSgpO1xuIl19
