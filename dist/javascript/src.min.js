!function(){angular.module("boilerplate",["ngRoute","appRoutes","mainCtrl","smart-table"])}(),function(){angular.module("appRoutes",[]).config(["$routeProvider","$locationProvider","$httpProvider",function(n,e,t){n.when("/",{templateUrl:"app/main/main.html",controller:"mainController"}).when("/sign-in",{templateUrl:"app/auth/signin.html",controller:"signInController"}).when("/sign-up",{templateUrl:"app/auth/signup.html",controller:"signUpController"}).otherwise({redirectTo:"/"}),e.html5Mode(!0),t.interceptors.push("authHttpResponseInterceptor")}]).factory("authHttpResponseInterceptor",["$q","$location",function(n,e){return{request:function(n){var e=localStorage.userToken;return n.headers.token=e,n},response:function(e){return e.status,e||n.when(e)},responseError:function(t){return 401===t.status&&(localStorage.removeItem("userToken"),e.path("/")),n.reject(t)}}}])}(),function(){angular.module("boilerplate").factory("authService",["$http",function(n){return{create:function(e,t,o){n.post("/api/users/",e).success(function(n){t(n)}).error(function(n){o(n)})},localAuth:function(e,t,o){n.post("/api/auth/local",e).success(function(n){t(n)}).error(function(n){o(n)})}}}])}(),function(){angular.module("boilerplate").controller("signInController",["$scope","authService",function(n,e){}])}(),function(){angular.module("boilerplate").controller("signUpController",["$scope","authService",function(n,e){}])}(),function(){angular.module("mainCtrl",[]).controller("mainController",["$scope","userService","$timeout",function(n,e,t){n.user={},e.getAll(function(e){n.users=e},function(n){console.log(n)}),n.ping=function(){n.user.disableBtn=!0,e.create(n.user,function(e){n.users.push(e),n.user={}},function(e){console.log(e),n.pingErrorMsg=e.message||"something went wrong",t(function(){n.pingErrorMsg=""},3e3)})},n.update=function(o,r){o.disableBtn=!0,e.update(o,function(e){n.users[r]=e},function(e){console.log(e),o.disableBtn=!1,n.pingErrorMsg=e.message||"something went wrong",t(function(){n.pingErrorMsg=""},3e3)})},n.delete=function(o,r){o.disableBtn=!0,e.delete({id:o.id},function(){n.users.splice(r,1)},function(e){console.log(e),o.disableBtn=!1,n.pingErrorMsg=e.message||"something went wrong",t(function(){n.pingErrorMsg=""},3e3)})}}])}(),function(){angular.module("boilerplate").factory("userService",["$http",function(n){return{create:function(e,t,o){n.post("/api/ping/",e,{}).success(function(n){t(n)}).error(function(n){o(n)})},update:function(e,t,o){n.put("/api/update/",e,{}).success(function(n){t(n)}).error(function(n){o(n)})},get:function(e,t,o){n.get("/api/user/"+e).success(function(n){t(n)}).error(function(n){o(n)})},getAll:function(e,t){n.get("/api/users").success(function(n){e(n)}).error(function(n){t(n)})},delete:function(e,t,o){console.log(e),n({url:"/api/delete",method:"DELETE",data:e,headers:{"Content-Type":"application/json;charset=utf-8"}}).then(function(n){t(n)},function(n){o(n)})}}}])}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFwcC5yb3V0ZXMuanMiLCJhdXRoL2F1dGguc2VydmljZS5qcyIsImF1dGgvc2lnbmluLmN0cmwuanMiLCJhdXRoL3NpZ251cC5jdHJsLmpzIiwibWFpbi9tYWluLmN0cmwuanMiLCJtYWluL3VzZXIuc2VydmljZS5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCIkbG9jYXRpb25Qcm92aWRlciIsIiRodHRwUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImh0bWw1TW9kZSIsImludGVyY2VwdG9ycyIsInB1c2giLCJmYWN0b3J5IiwiJHEiLCIkbG9jYXRpb24iLCJyZXF1ZXN0IiwidG9rZW4iLCJsb2NhbFN0b3JhZ2UiLCJ1c2VyVG9rZW4iLCJoZWFkZXJzIiwicmVzcG9uc2UiLCJzdGF0dXMiLCJyZXNwb25zZUVycm9yIiwicmVqZWN0aW9uIiwicmVtb3ZlSXRlbSIsInBhdGgiLCJyZWplY3QiLCIkaHR0cCIsImNyZWF0ZSIsIm9iaiIsInN1Y2Nlc3MiLCJlcnJvciIsInBvc3QiLCJkYXRhIiwibG9jYWxBdXRoIiwiJHNjb3BlIiwiYXV0aFNlcnZpY2UiLCJ1c2VyU2VydmljZSIsIiR0aW1lb3V0IiwidXNlciIsImdldEFsbCIsInVzZXJzIiwiZXJyIiwiY29uc29sZSIsImxvZyIsInBpbmciLCJkaXNhYmxlQnRuIiwicGluZ0Vycm9yTXNnIiwibWVzc2FnZSIsInVwZGF0ZSIsImluZGV4IiwiZGVsZXRlIiwiaWQiLCJzcGxpY2UiLCJwdXQiLCJnZXQiLCJ1cmwiLCJtZXRob2QiLCJDb250ZW50LVR5cGUiLCJ0aGVuIl0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNBQSxRQUFBQyxPQUFBLGVBQUEsVUFBQSxZQUFBLFdBQUEsbUJDREEsV0FDQUQsUUFBQUMsT0FBQSxnQkFBQUMsUUFBQSxpQkFBQSxvQkFBQSxn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QUFBLFNBQUFXLEdBQ0FYLEVBQUFXLE1BR0FPLE9BQUEsU0FBQXBCLEVBQUFDLEVBQUFDLEdBQ0FKLEVBQUEyQixJQUFBLGVBQUF6QixNQUNBQyxRQUFBLFNBQUFHLEdBQ0FILEVBQUFHLEtBRUFGLE1BQUEsU0FBQVcsR0FDQVgsRUFBQVcsTUFHQWEsSUFBQSxTQUFBSCxFQUFBdEIsRUFBQUMsR0FDQUosRUFBQTRCLElBQUEsYUFBQUgsR0FDQXRCLFFBQUEsU0FBQUcsR0FDQUgsRUFBQUcsS0FFQUYsTUFBQSxTQUFBVyxHQUNBWCxFQUFBVyxNQUdBRixPQUFBLFNBQUFWLEVBQUFDLEdBQ0FKLEVBQUE0QixJQUFBLGNBQ0F6QixRQUFBLFNBQUFHLEdBQ0FILEVBQUFHLEtBRUFGLE1BQUEsU0FBQVcsR0FDQVgsRUFBQVcsTUFHQVMsT0FBQSxTQUFBWixFQUFBVCxFQUFBQyxHQUNBWSxRQUFBQyxJQUFBTCxHQUNBWixHQUNBNkIsSUFBQSxjQUNBQyxPQUFBLFNBQ0F4QixLQUFBTSxFQUNBcEIsU0FDQXVDLGVBQUEsb0NBR0FDLEtBQUEsU0FBQTFCLEdBQ0FILEVBQUFHLElBQ0EsU0FBQVMsR0FDQVgsRUFBQVciLCJmaWxlIjoic3JjLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpIHtcbiAgICBhbmd1bGFyLm1vZHVsZSgnYm9pbGVycGxhdGUnLCBbJ25nUm91dGUnLCAnYXBwUm91dGVzJywgJ21haW5DdHJsJywgJ3NtYXJ0LXRhYmxlJ10pO1xufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcFJvdXRlcycsIFtdKS5jb25maWcoWyckcm91dGVQcm92aWRlcicsICckbG9jYXRpb25Qcm92aWRlcicsICckaHR0cFByb3ZpZGVyJywgZnVuY3Rpb24gKCRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlciwgJGh0dHBQcm92aWRlcikge1xuXG4gICAgICAgICRyb3V0ZVByb3ZpZGVyXG5cbiAgICAgICAgLy8gaG9tZSBwYWdlXG4gICAgICAgICAgICAud2hlbignLycsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9tYWluL21haW4uaHRtbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ21haW5Db250cm9sbGVyJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC53aGVuKCcvc2lnbi1pbicsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9hdXRoL3NpZ25pbi5odG1sJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnc2lnbkluQ29udHJvbGxlcidcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbignL3NpZ24tdXAnLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvYXV0aC9zaWdudXAuaHRtbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3NpZ25VcENvbnRyb2xsZXInXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLm90aGVyd2lzZSh7XG4gICAgICAgICAgICAgICAgcmVkaXJlY3RUbzogJy8nXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG4gICAgICAgICRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ2F1dGhIdHRwUmVzcG9uc2VJbnRlcmNlcHRvcicpO1xuXG4gICAgfV0pXG5cbiAgICAgICAgLmZhY3RvcnkoJ2F1dGhIdHRwUmVzcG9uc2VJbnRlcmNlcHRvcicsIFsnJHEnLCAnJGxvY2F0aW9uJywgZnVuY3Rpb24gKCRxLCAkbG9jYXRpb24pIHtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0OiBmdW5jdGlvbiAocmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG9rZW4gPSBsb2NhbFN0b3JhZ2UudXNlclRva2VuO1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LmhlYWRlcnMudG9rZW4gPSB0b2tlbjtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3Q7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXNwb25zZTogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZSB8fCAkcS53aGVuKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlRXJyb3I6IGZ1bmN0aW9uIChyZWplY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlamVjdGlvbi5zdGF0dXMgPT09IDQwMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oXCJ1c2VyVG9rZW5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QocmVqZWN0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XSk7XG59KSgpOyIsIihmdW5jdGlvbigpe1xuICAgIGFuZ3VsYXIubW9kdWxlKCdib2lsZXJwbGF0ZScpLmZhY3RvcnkoJ2F1dGhTZXJ2aWNlJywgWyckaHR0cCcsIGZ1bmN0aW9uKCRodHRwKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjcmVhdGU6IGZ1bmN0aW9uIChvYmosIHN1Y2Nlc3MsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnL2FwaS91c2Vycy8nLCBvYmopLlxuICAgICAgICAgICAgICAgIHN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzcyhkYXRhKTtcbiAgICAgICAgICAgICAgICB9KS5cbiAgICAgICAgICAgICAgICBlcnJvcihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBlcnJvcihkYXRhKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsb2NhbEF1dGggOiBmdW5jdGlvbiAob2JqLCBzdWNjZXNzLCBlcnJvcikge1xuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJy9hcGkvYXV0aC9sb2NhbCcsIG9iaikuXG4gICAgICAgICAgICAgICAgc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzKGRhdGEpO1xuICAgICAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgICAgIGVycm9yKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yKGRhdGEpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgfV0pO1xufVxuKSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG4gICAgICAgIGFuZ3VsYXIubW9kdWxlKCdib2lsZXJwbGF0ZScpLmNvbnRyb2xsZXIoJ3NpZ25JbkNvbnRyb2xsZXInLCAgWyckc2NvcGUnLCAnYXV0aFNlcnZpY2UnLCBmdW5jdGlvbigkc2NvcGUsIGF1dGhTZXJ2aWNlKSB7XG5cblxuICAgICAgICB9XSk7XG4gICAgfVxuKSgpOyIsIihmdW5jdGlvbigpIHtcbiAgICBhbmd1bGFyLm1vZHVsZSgnYm9pbGVycGxhdGUnKS5jb250cm9sbGVyKCdzaWduVXBDb250cm9sbGVyJywgWyckc2NvcGUnLCAnYXV0aFNlcnZpY2UnLCBmdW5jdGlvbiAoJHNjb3BlLCBhdXRoU2VydmljZSkge1xuXG5cbiAgICB9XSk7XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICAgYW5ndWxhci5tb2R1bGUoJ21haW5DdHJsJywgW10pLmNvbnRyb2xsZXIoJ21haW5Db250cm9sbGVyJywgWyckc2NvcGUnLCAndXNlclNlcnZpY2UnLCAnJHRpbWVvdXQnLCBmdW5jdGlvbiAoJHNjb3BlLCB1c2VyU2VydmljZSwgJHRpbWVvdXQpIHtcbiAgICAgICAgJHNjb3BlLnVzZXIgPSB7fTtcbiAgICAgICAgdXNlclNlcnZpY2UuZ2V0QWxsKGZ1bmN0aW9uIChkYXRhKSB7ICAgICAgICAgICAgXG4gICAgICAgICAgICAkc2NvcGUudXNlcnMgPSBkYXRhO1xuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICAgIH0pXG4gICAgICAgICRzY29wZS5waW5nID0gZnVuY3Rpb24gKCkgeyAgIFxuICAgICAgICAgICAgJHNjb3BlLnVzZXIuZGlzYWJsZUJ0biA9IHRydWU7ICAgICAgIFxuICAgICAgICAgICAgdXNlclNlcnZpY2UuY3JlYXRlKCRzY29wZS51c2VyLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICRzY29wZS51c2Vycy5wdXNoKGRhdGEpO1xuICAgICAgICAgICAgICAgICRzY29wZS51c2VyID0ge31cbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICAgICAgICAgICAgJHNjb3BlLnBpbmdFcnJvck1zZyA9IGVyci5tZXNzYWdlIHx8IFwic29tZXRoaW5nIHdlbnQgd3JvbmdcIjtcbiAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5waW5nRXJyb3JNc2cgPSBcIlwiXG4gICAgICAgICAgICAgICAgfSwgMzAwMClcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUudXBkYXRlID0gZnVuY3Rpb24gKHVzZXIsIGluZGV4KSB7ICBcbiAgICAgICAgICAgIHVzZXIuZGlzYWJsZUJ0biA9IHRydWU7ICAgICAgICBcbiAgICAgICAgICAgIHVzZXJTZXJ2aWNlLnVwZGF0ZSh1c2VyLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICRzY29wZS51c2Vyc1tpbmRleF0gPSBkYXRhXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICB1c2VyLmRpc2FibGVCdG4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUucGluZ0Vycm9yTXNnID0gZXJyLm1lc3NhZ2UgfHwgXCJzb21ldGhpbmcgd2VudCB3cm9uZ1wiO1xuICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBpbmdFcnJvck1zZyA9IFwiXCJcbiAgICAgICAgICAgICAgICB9LCAzMDAwKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5kZWxldGUgPSBmdW5jdGlvbiAodXNlciwgaW5kZXgpIHsgIFxuICAgICAgICAgICAgdXNlci5kaXNhYmxlQnRuID0gdHJ1ZTsgICAgICAgXG4gICAgICAgICAgICB1c2VyU2VydmljZS5kZWxldGUoe2lkOiB1c2VyLmlkfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICRzY29wZS51c2Vycy5zcGxpY2UoaW5kZXgsMSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgICAgICAgICAgIHVzZXIuZGlzYWJsZUJ0biA9IGZhbHNlOyBcbiAgICAgICAgICAgICAgICAkc2NvcGUucGluZ0Vycm9yTXNnID0gZXJyLm1lc3NhZ2UgfHwgXCJzb21ldGhpbmcgd2VudCB3cm9uZ1wiO1xuICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnBpbmdFcnJvck1zZyA9IFwiXCJcbiAgICAgICAgICAgICAgICB9LCAzMDAwKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1dKTtcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgICBhbmd1bGFyLm1vZHVsZSgnYm9pbGVycGxhdGUnKS5mYWN0b3J5KCd1c2VyU2VydmljZScsIFsnJGh0dHAnLCBmdW5jdGlvbiAoJGh0dHApIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNyZWF0ZTogZnVuY3Rpb24gKG9iaiwgc3VjY2VzcywgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3BpbmcvJywgb2JqLCB7fSkuXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3MoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgICAgICAgICBlcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uIChvYmosIHN1Y2Nlc3MsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgJGh0dHAucHV0KCcvYXBpL3VwZGF0ZS8nLCBvYmosIHt9KS5cbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzcyhkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICAgICAgICAgIGVycm9yKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKGlkLCBzdWNjZXNzLCBlcnJvcikge1xuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS91c2VyLycgKyBpZCkuXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3MoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgICAgICAgICBlcnJvcihmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRBbGw6IGZ1bmN0aW9uIChzdWNjZXNzLCBlcnJvcikge1xuICAgICAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS91c2VycycpLlxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9KS5cbiAgICAgICAgICAgICAgICAgICAgZXJyb3IoZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVsZXRlOiBmdW5jdGlvbiAodXNlciwgc3VjY2VzcywgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh1c2VyKVxuICAgICAgICAgICAgICAgICRodHRwKHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2FwaS9kZWxldGUnLFxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB1c2VyLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOFwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3MoZGF0YSk7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICBlcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgIH1dKTtcbn1cbikoKTtcbiJdfQ==
